<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>promise</title>
</head>
<body>
<script>
// const tasks = [];
// const output = (i)=> new Promise((resolve)=>{
//     setTimeout(()=>{
//         console.log(new Date,i);
//         resolve();
//     },1000*i);
// })
// for(var i=0;i<5;i++){
//     tasks.push(output(i));
// }
// Promise.all(tasks).then(()=>{
//     setTimeout(()=>{
//         console.log(new Date,i);
//     },1000);
// })
// Promise 新建后就会立即执行。
// let promise = new Promise(function(resolve,reject){
//     console.log("Promise");
//     resolve();
// });
// promise.then(function(){
//     console.log('Resolved.');
// })
// console.log('hi');
// function timeout(ms){
//     return new Promise((resolve,reject)=>{
//         setTimeout(resolve,ms,"done");
//     });
// }
// timeout(100).then((value)=>{
//     console.log(value);
// });
let p1 = new Promise(function(resolve,reject){
    setTimeout(()=>reject(new Error('fail')),3000);
});
let p2 = new Promise(function(resolve,reject){
    setTimeout(()=>resolve(p1),1000);
});
p2.then(v=>console.log(v)).catch(err=>console.log(err));
</script>
</body>
</html>